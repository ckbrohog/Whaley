<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Whaley</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="icon" type="image/png" href="whaley_middle.png" />
  <style>
    html,body { height:100%; margin:0; }             /* body scroll removed via wrapper */
    .pixelated{ image-rendering:pixelated }

    @keyframes dive{
      0%  { transform:translateY(0);    opacity:1 }
      90% { transform:translateY(115vh);opacity:1 }
      100%{ transform:translateY(150vh);opacity:0 }
    }
    .dive{ animation:dive 1.4s cubic-bezier(.42,0,.58,1) forwards }

    @keyframes fadeUp{ from{opacity:0;transform:translateY(8px)}
                       to  {opacity:1;transform:translateY(0)}}
    .fadeUp{ animation:fadeUp .3s ease-out forwards }
  </style>
</head>

<body class="bg-gray-900 text-gray-100 font-sans">

<!-- fixed wrapper: no page scroll on mobile or desktop -->
<div class="fixed inset-0 overflow-hidden flex items-center justify-center">

  <!-- === A. DIVE STAGE === -->
  <div id="diveStage" class="flex flex-col items-center gap-4">
    <img id="logo" src="whaley_middle.png"
         class="w-52 sm:w-64 pixelated select-none" alt="Whaley logo" />

    <p id="tagline" class="text-gray-400 text-xs sm:text-sm text-center">
      Your future crypto-whale dashboard
    </p>

    <button id="diveBtn"
            class="px-5 py-2 bg-emerald-600 hover:bg-emerald-500 active:bg-emerald-700
                   rounded pixelated text-xs sm:text-sm tracking-widest">
      DEEP&nbsp;DIVE
    </button>
  </div>

  <!-- === B. HARPOON STAGE === -->
  <div id="harpoonStage"
       class="hidden flex flex-col items-center gap-4 w-72 sm:w-96">

    <input id="addrInput" type="text" autocomplete="off" spellcheck="false"
           placeholder="paste whale address‚Ä¶"
           class="w-full px-3 py-2 rounded bg-gray-800 text-xs sm:text-sm
                  placeholder-gray-500 pixelated outline-none" />

    <button id="harpoonBtn" disabled
            class="w-full py-2 bg-indigo-600 rounded pixelated text-xs sm:text-sm
                   tracking-widest disabled:opacity-40 disabled:cursor-not-allowed
                   hover:bg-indigo-500 active:bg-indigo-700">
      HARPOON&nbsp;WHALE
    </button>

    <details class="w-full bg-gray-800 rounded-lg p-3">
      <summary class="cursor-pointer outline-none select-none">
        üó∫Ô∏è Tracking (<span id="trackCount">0</span>)
      </summary>
      <ul id="trackList"
          class="text-xs mt-2 space-y-1 break-all max-h-32 overflow-y-auto"></ul>
    </details>
  </div>
</div>

<script>
/* grab elements */
const diveStage   = document.getElementById('diveStage');
const harpoonStage= document.getElementById('harpoonStage');
const logo        = document.getElementById('logo');
const tag         = document.getElementById('tagline');
const diveBtn     = document.getElementById('diveBtn');

const input  = document.getElementById('addrInput');
const harp   = document.getElementById('harpoonBtn');
const list   = document.getElementById('trackList');
const cntLbl = document.getElementById('trackCount');

/* persistent whales */
const tracked = JSON.parse(localStorage.getItem('trackedWhales') || '[]');
const save    = () => localStorage.setItem('trackedWhales', JSON.stringify(tracked));
const render  = () => {
  list.innerHTML='';
  tracked.forEach(a=>{
    const li=document.createElement('li');
    li.textContent=a;
    list.appendChild(li);
  });
  cntLbl.textContent = tracked.length;
};
render();

/* dive animation */
diveBtn.onclick = () =>{
  [logo,tag,diveBtn].forEach(el => el.classList.add('dive'));
  diveBtn.disabled = true;
};
logo.addEventListener('animationend', () =>{
  diveStage.classList.add('hidden');
  harpoonStage.classList.remove('hidden');
  harpoonStage.classList.add('fadeUp');
  input.focus();
});

/* input validation */
const ok=v=>/^0x[a-f0-9]{40}$/i.test(v.trim())||(v.trim().length>=32&&v.trim().length<=44);
input.oninput = () => harp.disabled = !ok(input.value);

/* harpoon action */
harp.onclick = () =>{
  const addr = input.value.trim();
  if(!ok(addr)) return;
  tracked.push(addr); save(); render();
  input.value=''; harp.disabled = true; input.focus();
};
</script>
</body>
</html>
